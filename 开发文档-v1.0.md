# 需求分析
### 用户功能
（1）可以预订指定场次的座位。  
（2）用图形示意可定座位和已定座位。  
（3）可以修改订票观众的信息  
（4）观众可以撤销自己的订票  
（5）观众可以通过先取消再重新订的方式实现座位号的改订  
（6）观众可对已看电影/演出进行点评和评分  
### 管理员功能
（1）可以修改场次信息和座位信息  
（2）可以添加指定的演出信息，并添加座位信息  
（3）可以输出报表，查看销售信息  
# 使用技术
整个项目采用前后端完全分离的技术，前端通过ajax调用后端接口，后端返回json（格式类似于python的dict）数据给前端。  
前端：html＋css＋javascript，推荐使用vue.js框架，当然不用框架或者用其他框架都可以。  
后端：SpringBoot2.0＋JPA
# 数据库结构
项目使用部署在腾讯云的mysql数据库
### mysql版本
5.7.23
### 数据库名称
booking
### 用户表user
![avatar](/image/1.png)
### 活动表activity
![avatar](/image/2.png)
### 订单表order
![avatar](/image/3.png)
### 订单详情表order_detail
![avatar](/image/4.png)
### 评论表comment
![avatar](/image/5.png)
### 场次表session
![avatar](/image/6.png)
### 座位表seat
![avatar](/image/7.png)
### 分类表category
![avatar](/image/8.png)
# API
### 用户登录
```
POST /login
```
参数
```
userId: "3116004646"
password: "123456"
```
返回（登录成功）
···
{
  "code": 0,
  "msg": "成功",
  "data": {
      "userName": "张三",
  }
}
···
返回（登录失败）
···
{
  "code": 1,
  "msg": "密码错误",
}
···
### 用户登出
```
GET /logout
```
```
参数
```
userId: "3116004646"
```
返回
```
{
  "code": 0,
  "msg": "成功",
}
```
### 获取指定用户信息
···
GET /user/list
···
参数
···
userId: "3116004646"
···
返回
```
{
  "code": 0,
  "msg": "成功",
  "data": {
      "username": "张三",
	  "phone": "12345678901",
	  "email": "123456@qq.com",
	  "createTime": 1490171219,
      "updateTime": 1490171219
  }
}
```
### 用户注册
```
POST /user/register
```
参数
```
userId: "3116004646"
userName: "张三"
password: "123456"
phone: "12345678901"  //【非必填】
email: "123456@qq.com"  //【非必填】
```
返回
```
{
  "code": 0,
  "msg": "成功",
}
```
### 检测ID是否重复
```
GET /user/repeat/id
```
参数
```
userId: "3116004646"
```
返回（重复）
```
{
  "code": 2,
  "msg": "ID已被使用"
}
```
返回（不重复）
```
{
  "code": 0,
  "msg": "成功"
}
```
### 修改用户信息
```
POST /user/update
```
参数
```
userName: "张三
password: "123456"  //【非必填】可以在需要修改密码的时候再传入
phone: "12345678901"  //【非必填】
email: "297354270@qq.com"  //【非必填】
```
返回
```
{
  "code": 0,
  "msg": "成功"
}
```